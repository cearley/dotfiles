{{- /* Retrieve KeePassXC entry name from machines.yaml based on computer name pattern.

     Uses the generic machine-config template with dot-notation to lookup nested entries.

     Parameters (pass as dict merged with root context):
     - entry (required): Name of the KeePassXC entry to retrieve (e.g., "ssh")

     Examples:
       Get SSH entry:  {{ includeTemplate "machine-keepassxc-entry" (merge (dict "entry" "ssh") .) }}

     Returns empty string if no pattern matches or entry not defined
*/ -}}
{{- if not (hasKey . "entry") -}}
  {{- fail "machine-keepassxc-entry template requires 'entry' parameter" -}}
{{- end -}}
{{- $entry := .entry -}}
{{- $settingPath := printf "keepassxc_entries.%s" $entry -}}
{{- includeTemplate "machine-config" (merge (dict "setting" $settingPath) .) -}}
