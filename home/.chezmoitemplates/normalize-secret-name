{{- /*
normalize-secret-name template: Convert KeePassXC entry/attribute to AWS secret name

Usage: {{ template "normalize-secret-name" (dict "entry" "AWS (DI Dev)" "attribute" "aws access key id") }}
Output: AWS-DI-Dev/aws-access-key-id

This template normalizes KeePassXC entry and attribute names into AWS Secrets Manager
compatible secret names by:
- Replacing spaces with hyphens (for both entry and attribute)
- Removing parentheses (for both entry and attribute)
- Combining as "entry/attribute" format

Args:
- entry: The KeePassXC entry name (e.g., "AWS (DI Dev)")
- attribute: The attribute name (e.g., "aws_access_key_id")
*/ -}}

{{- $entry := .entry -}}
{{- $attribute := .attribute -}}

{{- $normalizedEntry := $entry | replace " " "-" | replace "(" "" | replace ")" "" -}}
{{- $normalizedAttribute := $attribute | replace " " "-" | replace "(" "" | replace ")" "" -}}
{{- $normalizedEntry -}}/{{- $normalizedAttribute -}}