{{- if eq .chezmoi.os "darwin" -}}
#!/bin/bash

set -euo pipefail

source "{{ .chezmoi.sourceDir -}}/scripts/shared-utils.sh"

if ! require_tools curl; then
    exit 1
fi

if command_exists uv; then
    print_message "info" "uv is already installed. Updating..."
    uv self update
    exit 0
fi

print_message "info" "Installing uv (Python package manager) using standalone installer from astral.sh..."

# Install uv using the official installation script from astral.sh
curl -LsSf https://astral.sh/uv/install.sh | sh

print_message "success" "uv installed successfully!"
print_message "info" "You may need to restart your terminal or source your shell profile"

{{ end -}}