{{ if eq .chezmoi.os "darwin" -}}
#!/bin/bash

source "{{ .chezmoi.sourceDir -}}/scripts/shared-utils.sh"

if ! require_tools uv; then
    exit 1
fi

print_message "info" "Installing tools using uv..."

{{- $categories := prepend .tag_choices "core" }}
{{- range $category := $categories }}
  {{- $categoryData := index $.packages.darwin $category }}
  {{- if or (eq $category "core") (has $category $.tags) }}
    {{- if and (hasKey $categoryData "uv") $categoryData.uv }}
# Install {{ $category }} tools
{{ range $categoryData.uv -}}
uv tool install {{ . }}
{{ end -}}
    {{- end }}
  {{- end }}
{{- end }}

{{ end -}}
