{{- if eq .chezmoi.os "darwin" -}}
#!/bin/bash

# Source shared utility functions
source "{{ .chezmoi.sourceDir -}}/scripts/script-utils.sh"

# Check required tools
if ! require_tools brew; then
    exit 1
fi

# syncthing version: {{ output "syncthing" "--version" }}

# Check if syncthing service is loaded in brew services
if brew services list | grep -q "syncthing"; then
    print_message "info" "Restarting syncthing service..."
    brew services restart syncthing
    
    if [ $? -eq 0 ]; then
        print_message "success" "syncthing service restarted successfully"
    else
        print_message "error" "Failed to restart syncthing service"
        exit 1
    fi
else
    print_message "warning" "syncthing service not found in brew services - skipping restart"
    exit 0
fi
{{ end -}}