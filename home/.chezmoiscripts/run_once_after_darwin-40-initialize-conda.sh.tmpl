{{- if and (eq .chezmoi.os "darwin") (has "dev" .tags) -}}
#!/bin/bash

# Source shared utility functions
source "{{ .chezmoi.sourceDir -}}/scripts/script-utils.sh"

# Check required tools
if ! require_tools conda; then
    exit 1
fi

# Check if conda is already initialized for zsh
if grep -q ">>> conda initialize >>>" "$HOME/.zshrc" 2>/dev/null; then
    print_message "skip" "Skipping conda initialization: conda is already initialized for zsh"
    exit 0
fi

print_message "info" "Initializing conda for zsh shell..."
conda init zsh

print_message "success" "Conda initialized successfully for zsh"

{{ end -}}