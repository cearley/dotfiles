{{- if eq .chezmoi.os "darwin" -}}
#!/bin/bash

# Source shared utility functions
source "{{ .chezmoi.sourceDir -}}/scripts/script-utils.sh"

print_message "info" "Refreshing font cache to register newly installed fonts..."

# Restart the font daemon (fontd) to re-scan installed fonts
# Killing fontd is safe - macOS will automatically respawn it
if killall fontd 2>/dev/null; then
    print_message "success" "Font daemon restarted - new fonts are now available"
    # Give fontd a moment to respawn and re-scan fonts
    sleep 2
else
    print_message "warning" "Font daemon not found or could not restart"
    print_message "info" "Fonts will be available after logout/login"
fi

{{ end -}}
